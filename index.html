<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor Ultimate - Editor Completo</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; overflow: hidden; }
        * { box-sizing: border-box; }
        .scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
        .scrollbar::-webkit-scrollbar-track { background: #1e1e1e; }
        .scrollbar::-webkit-scrollbar-thumb { background: #424242; border-radius: 4px; }
        .scrollbar::-webkit-scrollbar-thumb:hover { background: #4e4e4e; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icons (mesmos do código anterior, mas otimizados)
        const Icon = ({ name, className = "w-5 h-5" }) => {
            const icons = {
                settings: "M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z",
                code: "M16 18l6-6-6-6M8 6l-6 6 6 6",
                server: "M2 2h20v8H2zM2 14h20v8H2zM6 6h.01M6 18h.01",
                key: "M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4",
                folder: "M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z",
                file: "M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z M13 2v7h7",
                chevronRight: "M9 18l6-6-6-6",
                chevronDown: "M6 9l6 6 6-6",
                x: "M18 6L6 18M6 6l12 12",
                save: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z M17 21v-8H7v8 M7 3v5h8",
                play: "M5 3l14 9-14 9V3z",
                eye: "M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",
                eyeOff: "M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24 M1 1l22 22",
                plus: "M12 5v14M5 12h14",
                trash: "M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",
                sparkles: "M12 3v3m0 12v3m9-9h-3M6 12H3m15.364 6.364l-2.121-2.121M8.757 8.757L6.636 6.636m12.728 0l-2.121 2.121M8.757 15.243l-2.121 2.121",
                message: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",
                terminal: "M4 17l6-6-6-6M12 19h8",
                check: "M20 6L9 17l-5-5",
                alert: "M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M12 8v4M12 16h.01",
                loader: "M21 12a9 9 0 1 1-6.219-8.56"
            };
            const path = icons[name] || icons.file;
            return (
                <svg className={`${className} ${name === 'loader' ? 'animate-spin' : ''}`} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d={path} />
                </svg>
            );
        };

        // Estrutura de arquivos inicial
        const initialFiles = {
            name: 'projeto', type: 'folder', expanded: true,
            children: [
                {
                    name: 'src', type: 'folder', expanded: true,
                    children: [
                        { name: 'index.html', type: 'file', content: '<!DOCTYPE html>\n<html>\n<head>\n  <title>Meu Site</title>\n  <link rel="stylesheet" href="style.css">\n</head>\n<body>\n  <h1>Olá Mundo! 🚀</h1>\n  <script src="app.js"></script>\n</body>\n</html>' },
                        { name: 'style.css', type: 'file', content: 'body {\n  font-family: Arial, sans-serif;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  text-align: center;\n  padding: 50px;\n}' },
                        { name: 'app.js', type: 'file', content: 'console.log("App carregado!");\n\nfunction saudacao() {\n  alert("Olá do Cursor Ultimate!");\n}\n' }
                    ]
                },
                { name: 'README.md', type: 'file', content: '# Meu Projeto\n\nCriado com Cursor Ultimate!\n\n## Features\n- Editor completo\n- Claude AI\n- SSH/VPS\n' }
            ]
        };

        const CursorUltimate = () => {
            const [view, setView] = useState('editor');
            const [fileSystem, setFileSystem] = useState(initialFiles);
            const [openTabs, setOpenTabs] = useState([]);
            const [activeTab, setActiveTab] = useState(null);
            const [config, setConfig] = useState({ ssh: [], apiKeys: { claude: '', openai: '', customEndpoint: '' }, activeProvider: 'claude' });
            const [chatMessages, setChatMessages] = useState([]);
            const [currentMessage, setCurrentMessage] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [showPassword, setShowPassword] = useState({});
            const [notification, setNotification] = useState(null);
            const [showPreview, setShowPreview] = useState(false);
            const [previewContent, setPreviewContent] = useState('');
            
            // SSH Form
            const [newSSH, setNewSSH] = useState({ name: '', host: '', port: '22', username: '', password: '' });

            useEffect(() => {
                const savedConfig = localStorage.getItem('cursorConfig');
                if (savedConfig) setConfig(JSON.parse(savedConfig));
                
                const addPaths = (item, parent = '') => {
                    item.path = parent ? `${parent}/${item.name}` : item.name;
                    if (item.children) item.children.forEach(c => addPaths(c, item.path));
                };
                addPaths(fileSystem);
                setFileSystem({...fileSystem});
            }, []);

            const saveConfig = () => {
                localStorage.setItem('cursorConfig', JSON.stringify(config));
                showNotification('✅ Configurações salvas!', 'success');
            };

            const showNotification = (msg, type = 'info') => {
                setNotification({ msg, type });
                setTimeout(() => setNotification(null), 3000);
            };

            const findItem = (fs, path) => {
                if (fs.path === path) return fs;
                if (fs.children) for (let c of fs.children) {
                    const found = findItem(c, path);
                    if (found) return found;
                }
                return null;
            };

            const toggleFolder = (item) => {
                item.expanded = !item.expanded;
                setFileSystem({...fileSystem});
            };

            const openFile = (item) => {
                if (item.type !== 'file') return;
                if (!openTabs.find(t => t.path === item.path)) setOpenTabs([...openTabs, item]);
                setActiveTab(item.path);
            };

            const closeTab = (path, e) => {
                e.stopPropagation();
                const newTabs = openTabs.filter(t => t.path !== path);
                setOpenTabs(newTabs);
                if (activeTab === path) setActiveTab(newTabs.length > 0 ? newTabs[newTabs.length - 1].path : null);
            };

            const updateContent = (content) => {
                if (!activeTab) return;
                const item = findItem(fileSystem, activeTab);
                if (item) {
                    item.content = content;
                    setFileSystem({...fileSystem});
                    const idx = openTabs.findIndex(t => t.path === activeTab);
                    if (idx !== -1) {
                        openTabs[idx].content = content;
                        setOpenTabs([...openTabs]);
                    }
                }
            };

            const getActiveFile = () => openTabs.find(t => t.path === activeTab);

            const sendToClaude = async (msg) => {
                setIsLoading(true);
                const file = getActiveFile();
                try {
                    const apiKey = config.apiKeys.claude;
                    if (!apiKey) {
                        showNotification('⚠️ Configure sua API Key em Admin!', 'error');
                        setIsLoading(false);
                        return;
                    }

                    const res = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: { "Content-Type": "application/json", "x-api-key": apiKey, "anthropic-version": "2023-06-01" },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 4000,
                            messages: [...chatMessages.map(m => ({ role: m.role, content: m.content })), { role: "user", content: msg }],
                            system: file ? `Arquivo: ${file.name}\n\`\`\`\n${file.content}\n\`\`\`\n\nAjude com código em português.` : 'Assistente de programação em português.'
                        })
                    });

                    const data = await res.json();
                    if (data.error) throw new Error(data.error.message);
                    setChatMessages(prev => [...prev, { role: 'user', content: msg }, { role: 'assistant', content: data.content[0].text }]);
                } catch (error) {
                    showNotification(`❌ Erro: ${error.message}`, 'error');
                    setChatMessages(prev => [...prev, { role: 'user', content: msg }, { role: 'assistant', content: `Erro: ${error.message}` }]);
                }
                setIsLoading(false);
            };

            const generatePreview = () => {
                const html = findItem(fileSystem, 'projeto/src/index.html');
                const css = findItem(fileSystem, 'projeto/src/style.css');
                const js = findItem(fileSystem, 'projeto/src/app.js');
                if (!html) { alert('index.html não encontrado!'); return; }
                let content = html.content;
                if (css) content = content.replace('<link rel="stylesheet" href="style.css">', `<style>${css.content}</style>`);
                if (js) content = content.replace('<script src="app.js"></script>', `<script>${js.content}</script>`);
                setPreviewContent(content);
                setShowPreview(true);
            };

            const FileTree = ({ item, level }) => {
                const isFolder = item.type === 'folder';
                const isSelected = activeTab === item.path;
                const icon = isFolder ? 'folder' : item.name.endsWith('.html') ? '🌐' : item.name.endsWith('.css') ? '🎨' : item.name.endsWith('.js') ? '⚡' : '📄';

                return (
                    <div>
                        <div
                            className={`flex items-center gap-1 px-2 py-1 hover:bg-[#2d2d30] cursor-pointer ${isSelected ? 'bg-[#37373d]' : ''}`}
                            style={{ paddingLeft: `${level * 12 + 8}px` }}
                            onClick={() => isFolder ? toggleFolder(item) : openFile(item)}
                        >
                            {isFolder ? (
                                <>
                                    <Icon name={item.expanded ? 'chevronDown' : 'chevronRight'} className="w-4 h-4" />
                                    <Icon name="folder" className="w-4 h-4 text-blue-400" />
                                </>
                            ) : (
                                <>
                                    <span className="w-4"></span>
                                    <span className="text-sm">{icon}</span>
                                </>
                            )}
                            <span className="text-sm ml-1">{item.name}</span>
                        </div>
                        {isFolder && item.expanded && item.children?.map((c, i) => <FileTree key={i} item={c} level={level + 1} />)}
                    </div>
                );
            };

            return (
                <div className="h-screen w-full bg-[#1e1e1e] flex flex-col text-white">
                    {/* Header */}
                    <div className="h-12 bg-[#2d2d30] border-b border-[#3e3e42] flex items-center justify-between px-4">
                        <div className="flex items-center gap-2">
                            <Icon name="sparkles" className="text-blue-400" />
                            <span className="font-bold">Cursor Ultimate</span>
                        </div>
                        <div className="flex gap-2">
                            <button onClick={() => setView('editor')} className={`px-3 py-1 rounded flex items-center gap-2 ${view === 'editor' ? 'bg-blue-600' : 'bg-[#3e3e42] hover:bg-[#4e4e52]'}`}>
                                <Icon name="code" className="w-4 h-4" /> Editor
                            </button>
                            <button onClick={() => setView('admin')} className={`px-3 py-1 rounded flex items-center gap-2 ${view === 'admin' ? 'bg-blue-600' : 'bg-[#3e3e42] hover:bg-[#4e4e52]'}`}>
                                <Icon name="settings" className="w-4 h-4" /> Admin
                            </button>
                            {view === 'editor' && (
                                <button onClick={generatePreview} className="px-3 py-1 bg-purple-600 hover:bg-purple-700 rounded flex items-center gap-2">
                                    <Icon name="eye" className="w-4 h-4" /> Preview
                                </button>
                            )}
                        </div>
                    </div>

                    {/* Content */}
                    {view === 'editor' ? (
                        <div className="flex-1 flex overflow-hidden">
                            {/* Sidebar */}
                            <div className="w-64 bg-[#252526] border-r border-[#3e3e42]">
                                <div className="h-10 bg-[#2d2d30] border-b border-[#3e3e42] px-3 flex items-center text-xs font-semibold text-gray-300">EXPLORADOR</div>
                                <div className="overflow-y-auto scrollbar"><FileTree item={fileSystem} level={0} /></div>
                            </div>

                            {/* Editor */}
                            <div className="flex-1 flex flex-col">
                                <div className="h-10 bg-[#252526] border-b border-[#3e3e42] flex overflow-x-auto scrollbar">
                                    {openTabs.map(tab => (
                                        <div key={tab.path} onClick={() => setActiveTab(tab.path)} className={`flex items-center gap-2 px-4 h-full border-r border-[#3e3e42] cursor-pointer group ${activeTab === tab.path ? 'bg-[#1e1e1e]' : 'hover:bg-[#2d2d30]'}`}>
                                            <span className="text-xs">{tab.name.endsWith('.html') ? '🌐' : tab.name.endsWith('.css') ? '🎨' : tab.name.endsWith('.js') ? '⚡' : '📄'}</span>
                                            <span className="text-sm">{tab.name}</span>
                                            <button onClick={(e) => closeTab(tab.path, e)} className="opacity-0 group-hover:opacity-100 hover:bg-[#3e3e42] rounded p-0.5">
                                                <Icon name="x" className="w-3 h-3" />
                                            </button>
                                        </div>
                                    ))}
                                </div>
                                {activeTab ? (
                                    <textarea value={getActiveFile()?.content || ''} onChange={(e) => updateContent(e.target.value)}
                                        className="flex-1 bg-[#1e1e1e] text-white p-4 font-mono text-sm resize-none focus:outline-none scrollbar"
                                        style={{ fontFamily: 'Consolas, Monaco, monospace', lineHeight: '1.6' }} spellCheck={false} />
                                ) : (
                                    <div className="flex-1 flex items-center justify-center text-gray-500">
                                        <div className="text-center">
                                            <Icon name="sparkles" className="w-16 h-16 mx-auto mb-4 opacity-30" />
                                            <p>Selecione um arquivo</p>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* Chat */}
                            <div className="w-96 bg-[#252526] border-l border-[#3e3e42] flex flex-col">
                                <div className="h-10 bg-[#2d2d30] border-b border-[#3e3e42] px-4 flex items-center">
                                    <Icon name="message" className="w-4 h-4 mr-2" />
                                    <span className="text-sm font-semibold">Claude AI</span>
                                </div>
                                <div className="p-3 border-b border-[#3e3e42] grid grid-cols-2 gap-2">
                                    {['💡 Explicar', '🐛 Debug', '⚡ Otimizar', '📝 Comentar'].map((label, i) => (
                                        <button key={i} onClick={() => { setCurrentMessage(label); sendToClaude(label); }}
                                            disabled={isLoading} className="px-2 py-1 bg-[#3e3e42] hover:bg-[#4e4e52] rounded text-xs disabled:opacity-50">
                                            {label}
                                        </button>
                                    ))}
                                </div>
                                <div className="flex-1 overflow-y-auto p-4 space-y-4 scrollbar">
                                    {chatMessages.length === 0 && (
                                        <div className="text-center text-gray-400 text-sm mt-8">
                                            <Icon name="sparkles" className="w-12 h-12 mx-auto mb-3 opacity-50 text-blue-400" />
                                            <p>Claude AI pronto!</p>
                                        </div>
                                    )}
                                    {chatMessages.map((m, i) => (
                                        <div key={i} className={`p-3 rounded text-sm ${m.role === 'user' ? 'bg-blue-600/20 ml-4' : 'bg-[#2d2d30] mr-4'}`}>
                                            <div className="text-xs text-gray-400 mb-1 font-semibold">{m.role === 'user' ? '👤 Você' : '🤖 Claude'}</div>
                                            <div className="whitespace-pre-wrap">{m.content}</div>
                                        </div>
                                    ))}
                                    {isLoading && <div className="flex items-center gap-2 text-gray-400 text-sm p-3 bg-[#2d2d30] rounded mr-4"><Icon name="loader" />Pensando...</div>}
                                </div>
                                <div className="p-3 border-t border-[#3e3e42] flex gap-2">
                                    <input type="text" value={currentMessage} onChange={(e) => setCurrentMessage(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && sendToClaude(currentMessage) && setCurrentMessage('')}
                                        placeholder="Pergunte..." className="flex-1 bg-[#3e3e42] text-white px-3 py-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        disabled={isLoading} />
                                    <button onClick={() => { sendToClaude(currentMessage); setCurrentMessage(''); }} disabled={isLoading || !currentMessage.trim()}
                                        className="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm disabled:opacity-50">→</button>
                                </div>
                            </div>
                        </div>
                    ) : (
                        // Admin Panel
                        <div className="flex-1 overflow-y-auto scrollbar p-6 bg-[#1e1e1e]">
                            <div className="max-w-4xl mx-auto space-y-6">
                                <div className="flex items-center justify-between mb-8">
                                    <div><h1 className="text-3xl font-bold">⚙️ Configurações</h1><p className="text-gray-400">SSH e API Keys</p></div>
                                    <button onClick={saveConfig} className="px-4 py-2 bg-green-600 hover:bg-green-700 rounded flex items-center gap-2">
                                        <Icon name="save" /> Salvar
                                    </button>
                                </div>

                                {/* API Keys */}
                                <div className="bg-[#252526] rounded-lg p-6 border border-[#3e3e42]">
                                    <div className="flex items-center gap-3 mb-4"><Icon name="key" className="text-blue-400" /><h2 className="text-xl font-semibold">API Keys</h2></div>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-300 mb-2">Claude API Key</label>
                                            <div className="relative">
                                                <input type={showPassword.claude ? "text" : "password"} value={config.apiKeys.claude}
                                                    onChange={(e) => setConfig(p => ({ ...p, apiKeys: { ...p.apiKeys, claude: e.target.value } }))}
                                                    placeholder="sk-ant-..." className="w-full bg-[#3e3e42] text-white px-4 py-3 pr-12 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                                <button onClick={() => setShowPassword(p => ({ ...p, claude: !p.claude }))}
                                                    className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white">
                                                    <Icon name={showPassword.claude ? 'eyeOff' : 'eye'} />
                                                </button>
                                            </div>
                                            <p className="text-xs text-gray-500 mt-1">Obtenha em: <a href="https://console.anthropic.com" target="_blank" className="text-blue-400 hover:underline">console.anthropic.com</a></p>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-300 mb-2">OpenAI API Key</label>
                                            <div className="relative">
                                                <input type={showPassword.openai ? "text" : "password"} value={config.apiKeys.openai}
                                                    onChange={(e) => setConfig(p => ({ ...p, apiKeys: { ...p.apiKeys, openai: e.target.value } }))}
                                                    placeholder="sk-..." className="w-full bg-[#3e3e42] text-white px-4 py-3 pr-12 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                                <button onClick={() => setShowPassword(p => ({ ...p, openai: !p.openai }))}
                                                    className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white">
                                                    <Icon name={showPassword.openai ? 'eyeOff' : 'eye'} />
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* SSH */}
                                <div className="bg-[#252526] rounded-lg p-6 border border-[#3e3e42]">
                                    <div className="flex items-center gap-3 mb-4"><Icon name="server" className="text-green-400" /><h2 className="text-xl font-semibold">SSH / VPS</h2></div>
                                    <div className="space-y-3 mb-6">
                                        {config.ssh.length === 0 ? (
                                            <div className="text-center py-8 text-gray-500"><Icon name="server" className="w-12 h-12 mx-auto mb-3 opacity-30" /><p>Nenhuma conexão SSH</p></div>
                                        ) : (
                                            config.ssh.map(conn => (
                                                <div key={conn.id} className="bg-[#1e1e1e] rounded p-4 border border-[#3e3e42] flex items-start justify-between">
                                                    <div>
                                                        <h3 className="font-semibold mb-1">{conn.name}</h3>
                                                        <p className="text-sm text-gray-400">🌐 {conn.host}:{conn.port} | 👤 {conn.username}</p>
                                                    </div>
                                                    <button onClick={() => setConfig(p => ({ ...p, ssh: p.ssh.filter(c => c.id !== conn.id) }))}
                                                        className="px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm">
                                                        <Icon name="trash" className="w-4 h-4" />
                                                    </button>
                                                </div>
                                            ))
                                        )}
                                    </div>
                                    <div className="border-t border-[#3e3e42] pt-6">
                                        <h3 className="text-lg font-semibold mb-4">➕ Nova Conexão</h3>
                                        <div className="grid grid-cols-2 gap-4">
                                            <input type="text" value={newSSH.name} onChange={(e) => setNewSSH(p => ({ ...p, name: e.target.value }))} placeholder="Nome" className="bg-[#3e3e42] text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                            <input type="text" value={newSSH.host} onChange={(e) => setNewSSH(p => ({ ...p, host: e.target.value }))} placeholder="Host/IP" className="bg-[#3e3e42] text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                            <input type="text" value={newSSH.port} onChange={(e) => setNewSSH(p => ({ ...p, port: e.target.value }))} placeholder="Porta" className="bg-[#3e3e42] text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                            <input type="text" value={newSSH.username} onChange={(e) => setNewSSH(p => ({ ...p, username: e.target.value }))} placeholder="Usuário" className="bg-[#3e3e42] text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                            <textarea value={newSSH.password} onChange={(e) => setNewSSH(p => ({ ...p, password: e.target.value }))} placeholder="Senha/Key" className="col-span-2 bg-[#3e3e42] text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none font-mono text-sm" />
                                        </div>
                                        <button onClick={() => {
                                            if (!newSSH.name || !newSSH.host || !newSSH.username) { showNotification('⚠️ Preencha os campos!', 'error'); return; }
                                            setConfig(p => ({ ...p, ssh: [...p.ssh, { ...newSSH, id: Date.now() }] }));
                                            setNewSSH({ name: '', host: '', port: '22', username: '', password: '' });
                                            showNotification('✅ SSH adicionado!', 'success');
                                        }} className="mt-4 px-4 py-2 bg-green-600 hover:bg-green-700 rounded flex items-center gap-2">
                                            <Icon name="plus" /> Adicionar SSH
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Status Bar */}
                    <div className="h-6 bg-blue-600 flex items-center justify-between px-4 text-xs">
                        <div className="flex items-center gap-4">
                            {activeTab && <><span>📁 {getActiveFile()?.name}</span><span>Linhas: {getActiveFile()?.content.split('\n').length}</span></>}
                        </div>
                        <div className="flex items-center gap-2">
                            <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                            <span>Ready</span>
                        </div>
                    </div>

                    {/* Preview Modal */}
                    {showPreview && (
                        <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-lg w-full max-w-6xl h-5/6 flex flex-col">
                                <div className="bg-gray-800 text-white px-4 py-3 flex items-center justify-between rounded-t-lg">
                                    <span className="font-semibold">Preview</span>
                                    <button onClick={() => setShowPreview(false)} className="hover:bg-gray-700 p-2 rounded"><Icon name="x" className="text-white" /></button>
                                </div>
                                <iframe srcDoc={previewContent} className="flex-1 w-full border-0" title="Preview" sandbox="allow-scripts" />
                            </div>
                        </div>
                    )}

                    {/* Notification */}
                    {notification && (
                        <div className={`fixed bottom-6 right-6 px-6 py-4 rounded-lg shadow-2xl flex items-center gap-3 ${notification.type === 'success' ? 'bg-green-600' : notification.type === 'error' ? 'bg-red-600' : 'bg-blue-600'}`}>
                            <Icon name={notification.type === 'success' ? 'check' : 'alert'} />
                            <span className="font-medium">{notification.msg}</span>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<CursorUltimate />, document.getElementById('root'));
    </script>
</body>
</html>
